<html>
    <head>
        <title>Chain Em! - Demo Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="jquery.chainem.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                
                // Devuelve genero en funcion del espectaculo
                function daGenero(espectaculo){
                    var ret = [];
                    switch(espectaculo){
                        case '0': ret.push('0', '1', '2', '3');
                        break;
                        case '1': ret.push('1', '3');
                        break;
                        case '2': ret.push('1', '2');
                        break;
                    }
                    
                    return ret;
                }
                
                // devuelve funcion en funcion del genero y el espectacilo
                function daFuncion(genero, espectaculo){
                    var ret = [];
                        
                    if(espectaculo == '0'){
                        switch (genero){
                            case '0': ret.push('0', '1', '2', '3', '4');
                            break;
                            case '1': ret.push('2', '4');
                            break;
                            case '2': ret.push('1');
                            break;
                            case '3': ret.push('3');
                            break;
                        }
                    } else if(espectaculo == '1'){
                        // obra de teatro
                        switch (genero){
//                            case '0': ret.push('0', '1', '2', '3', '4');
//                            break;
                            case '1': ret.push('4');
                            break;
//                            case '2': ret.push('1');
//                            break;
                            case '3': ret.push('3');
                        break;
                        }
                    } else if(espectaculo == '2'){
                        // pelicula
                        switch (genero){
//                            case '0': ret.push('0', '1', '2', '3', '4');
//                            break;
                            case '1': ret.push('2');
                            break;
                            case '2': ret.push('1');
                            break;
//                            case '3': ret.push('3');
//                            break;
                        }
                    } 
                    
                    return ret;
                }
                
                function daFuncionParaChaining(genero, espectaculo){
                
                    var ret = {
                        '0': 'NS', 
                        '1': 'Iron Man 3', 
                        '2': 'La familia de mi novia', 
                        '3': 'Stravaganza', 
                        '4': 'Les Luthiers' 
                    };
                        
                    if(espectaculo == '0'){
                        switch (genero){
                            case '0':
                                alert("todo en 0!");
                                ret = {};
                            break;
                            case '1': 
                                delete ret['0'];
                                delete ret['1'];
                                delete ret['3'];
                            break;
                            case '2': 
                                delete ret['0'];
                                delete ret['2'];
                                delete ret['3'];
                                delete ret['4'];
                            break;
                            case '3':
                                delete ret['0'];
                                delete ret['1'];
                                delete ret['2'];
                                delete ret['4'];
                            break;
                        }
                    } else if(espectaculo == '1'){
                        // obra de teatro
                        switch (genero){
                            case '0':
                                alert("todo en 0!");
                                ret = {};
                            break;
                            case '1': 
                                delete ret['0'];
                                delete ret['1'];
                                delete ret['2'];
                                delete ret['3'];
                            break;
                            case '3':
                                delete ret['0'];
                                delete ret['1'];
                                delete ret['2'];
                                delete ret['4'];
                            break;
                        }
                    } else if(espectaculo == '2'){
                        // pelicula
                        switch (genero){
                            case '1': 
                                delete ret['0'];
                                delete ret['1'];
                                delete ret['3'];
                                delete ret['4'];
                            break;
                            case '2':
                                delete ret['0'];
                                delete ret['2'];
                                delete ret['3'];
                                delete ret['4'];
                            break;
                        }
                    } 
                    
                    return ret;
                }
                
                
                
                
                $('.chain').chainem({ 
                    'remote-methods': {
                        patternize: false
                    },
                    selectMode: "chaining",
                    'methods': {
                       /*  FILTERING  
                       'genero': function(pv){
                           return daGenero(pv.espectaculo);
                       },
                       'funcion': function(pv){
                           return daFuncion(pv.genero, pv.espectaculo);
                       } 
                       */ 
                       /* CHAINING */
                       'funcion': function(pv){
                            console.log(pv);
                            return daFuncionParaChaining(pv.genero, pv.espectaculo);
                       }
                    }
                });
            });
        </script>
    </head>
    <body>
        <form>
            <label for="espectaculo"><strong>Espectaculo</strong></label>
            <select name="A" id="espectaculo" class="chain">
                <option value="0">NS</option>
                <option value="1">Obra de Teatro</option>
                <option value="2">Pelicula</option>
            </select>
            
            <label for="genero"><strong>Genero</strong></label>
            <select name="B" id="genero" class="chain">
<!--                <option value="0">NS</option>
                <option value="1">Comedia</option>
                <option value="2">Accion</option>
                <option value="3">Extravagante</option>-->
            </select>
            
            <label for="funcion"><strong>Funci√≥n</strong></label>
            <select name="C" id="funcion" class="chain">
<!--                <option value="0">NS</option>
                <option value="1">Iron Man 3</option>
                <option value="2">La familia de mi novia</option>
                <option value="3">Stravaganza</option>
                <option value="4">Les Luthiers</option>-->
            </select>
            
        </form>
    </body>
    
    
</html>
